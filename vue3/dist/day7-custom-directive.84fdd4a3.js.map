{"version":3,"sources":["day7-custom-directive.js"],"names":["range","generateCodeFrame","source","start","end","length","lines","split","count","res","i","j","line","push","repeat","Math","max","String","lineLength","pad","min","join","Root","template","data","name","age","direction","pinValue","mounted","setTimeout","console","log","directives","syfocus2","el","focus","app","Vue","createApp","directive","bind","binding","vnode","beforeMount","prevVnode","style","position","s","arg","value","beforeUpdate","updated","beforeUnmount","unmounted","mount"],"mappings":"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","file":"day7-custom-directive.84fdd4a3.js","sourceRoot":"../src","sourcesContent":["const range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n    const lines = source.split(/\\r?\\n/);\n    let count = 0;\n    const res = [];\n    for (let i = 0; i < lines.length; i++) {\n        count += lines[i].length + 1;\n        if (count >= start) {\n            for (let j = i - range; j <= i + range || end > count; j++) {\n                if (j < 0 || j >= lines.length)\n                    continue;\n                const line = j + 1;\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\n                const lineLength = lines[j].length;\n                if (j === i) {\n                    // push underline\n                    const pad = start - (count - lineLength) + 1;\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\n                }\n                else if (j > i) {\n                    if (end > count) {\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\n                        res.push(`   |  ` + '^'.repeat(length));\n                    }\n                    count += lineLength + 1;\n                }\n            }\n            break;\n        }\n    }\n    return res.join('\\n');\n}\n\nconst Root = {\n    template: '<h1>{{ name }}</h1>' +\n    '<input ref=\"syinput\" v-syfocus />' +\n    '<p ref=\"pinp\" v-pin:[direction]=\"pinValue\">和素燕一起学习 Vue</p>',\n    data() {\n        return {\n            name: '《读懂Vue3编程思想》',\n            age: 20,\n            direction: 'top',\n            pinValue: 200\n        }\n    },\n    mounted() {\n        setTimeout(() => {\n            this.pinValue = 120;\n\n            console.log(generateCodeFrame('<input ref=\"syinput\" v-syfocus />'));\n        }, 1000);\n    },\n    directives: {\n        syfocus2: {\n            mounted(el) {\n                console.log('Root mounted: ', el);\n                el.focus();\n            }\n        }\n    }\n};\n\nconst app = Vue.createApp(Root);\n\napp.directive('syfocus', {\n    mounted(el) {\n        console.log('mounted: ', el);\n        el.focus();\n    },\n    bind(el, binding, vnode) {\n        console.log('bind', binding);\n    }\n});\n\napp.directive('pin', {\n    // 只会调用一次，指令首次被绑定到元素上\n    beforeMount(el, binding, vnode, prevVnode) {\n        console.log('beforeMount: ', el, binding, vnode, prevVnode);\n    },\n    // 元素的父元素被挂载到 DOM 时\n    mounted(el, binding, vnode, prevVnode) {\n        console.log('mounted: ', el, binding, vnode, prevVnode);\n        el.style.position = 'fixed'\n        // binding.value is the value we pass to directive - in this case, it's 200\n        const s = binding.arg || 'top'\n        el.style[s] = binding.value + 'px'\n    },\n    beforeUpdate(el, binding, vnode, prevVnode) {\n        console.log('beforeUpdate: ', el, binding, vnode, prevVnode);\n    },\n    updated(el, binding, vnode, prevVnode) {\n        console.log('updated: ', el, binding, vnode, prevVnode);\n        const s = binding.arg || 'top'\n        el.style[s] = binding.value + 'px'\n    },\n    beforeUnmount(el, binding, vnode, prevVnode) {\n        console.log('beforeUnmount: ', el, binding, vnode, prevVnode);\n    },\n    unmounted(el, binding, vnode, prevVnode) {\n        console.log('unmounted: ', el, binding, vnode, prevVnode);\n    }\n});\n\n\napp.mount('#suyan-app');\n"]}